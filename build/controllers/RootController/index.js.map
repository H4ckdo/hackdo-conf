{"version":3,"sources":["../../../controllers/RootController/index.js"],"names":["webpush","require","process","env","NODE_ENV","SECRET_PUSH_KEY","setVapidDetails","RootController","AttachMethods","req","res","subscription","body","notification","title","sendNotification","then","json","data","catch","error","module","exports"],"mappings":";;;;;;;;;;;;;;;;;;AAAA,IAAMA,UAAUC,QAAQ,UAAR,CAAhB;;WAC4BC,QAAQC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwCH,4CAAxC,GAA8EA,6C;IAAlGI,e,QAAAA,e;;AAERL,QAAQM,eAAR,CACE,+BADF,EAEE,yFAFF,EAGED,eAHF;;AAMA;;;;;;;IAMqBE,c,GAApBC,a;;;;;;;6BACUC,G,EAAKC,G,EAAK;AACjB,UAAIC,eAAeF,IAAIG,IAAvB;AACA;AACA,UAAMC,eAAe,yBAAe;AAClCC,eAAO,wBAD2B;AAElCF,cAAM;AAF4B,OAAf,CAArB;;AAKAZ,cAAQe,gBAAR,CAAyBJ,YAAzB,EAAuCE,YAAvC,EACGG,IADH,CACQ;AAAA,eAAQN,IAAIO,IAAJ,CAASC,IAAT,CAAR;AAAA,OADR,EAEGC,KAFH,CAES;AAAA,eAAST,IAAIO,IAAJ,CAASG,KAAT,CAAT;AAAA,OAFT;AAGD;;;;;AAGHC,OAAOC,OAAP,GAAiBf,cAAjB","file":"index.js","sourcesContent":["const webpush = require('web-push');\nconst { SECRET_PUSH_KEY } = process.env.NODE_ENV === \"production\" ? require('config/env/production.js') : require('config/env/development.js');\n\nwebpush.setVapidDetails(\n  'mailto:example@yourdomain.org',\n  \"BPlXiFG6NINNh-j7Tqhcgd2xMXYDM9_r1Wuuhbe4KB3TrCwaXQjXsdnCD_iOlh6tGF8Hyz86TMtzNxL2DJpA-Mc\",\n  SECRET_PUSH_KEY\n)\n\n/**\n * @class RootController\n * @param  {type} req {description}\n * @param  {type} res {description}\n * @return {type} {description}\n */\n@AttachMethods class RootController {\n  suscribe(req, res) {\n    let subscription = req.body;\n    debugger;\n    const notification = JSON.stringify({\n      title: 'Notificacion de prueba',\n      body: 'Test'\n    });\n\n    webpush.sendNotification(subscription, notification)\n      .then(data => res.json(data))\n      .catch(error => res.json(error));\n  }\n}\n\nmodule.exports = RootController;\n\n"]}