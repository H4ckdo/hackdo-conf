{"version":3,"sources":["../app.jsx"],"names":[],"mappings":";;;;;;;;;;;;AAAA,IAAM,UAAU,QAAQ,SAAR,CAAhB;AACA,IAAM,OAAO,QAAQ,MAAR,CAAb;;eACiB,QAAQ,eAAR,C;IAAT,I,YAAA,I;;WACyB,QAAQ,GAAR,CAAY,QAAZ,KAAyB,YAAzB,GAAwC,sCAAxC,GAA8E,uC;IAAvG,I,QAAA,I;IAAM,I,QAAA,I;IAAM,Q,QAAA,Q;;AACpB,IAAM,kBAAkB,+BAAxB;;gBAC4B,4B;IAApB,e,aAAA,e;;AAER;;;;;;AAIA,IAAM;AAAA,uFAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAChB;AACM,kBAFU,GAED,8BAFC;AAGV,sBAHU,GAGG,kCAHH;AAIV,uBAJU,GAII,yCAJJ;AAKV,oBALU,GAKC,gCALD;AAMV,uBANU,GAMI,QAAQ,aAAR,CANJ;AAOZ,eAPY,GAON,SAPM;AAAA;AAAA,mBAQc,YAAY,GAAZ,CARd;;AAAA;AAQZ,6BARY;;AAAA,iBASb,kBAAkB,EATL;AAAA;AAAA;AAAA;;AAUd,gBAAI,GAAJ,CAAQ,QAAQ,MAAR,CAAe,iBAAf,CAAR;AACA,gBAAI,MAAJ,CAAW,MAAX,EAAmB,QAAQ,KAAR,EAAe,UAAlC;AACA,gBAAI,GAAJ,CAAQ,aAAR,EAAuB,MAAvB;AACA,gBAAI,GAAJ,CAAQ,OAAR,EAAiB,KAAK,OAAL,CAAa,SAAb,EAAwB,UAAxB,CAAjB;AACI,4BAdU,GAcS,EAAC,IAAI,IAAL,CAAU;AAAV,aAdT;;AAAA,iBAeV,iBAAiB,EAfP;AAAA;AAAA;AAAA;;AAAA,kBAiBR,YAAa,KAjBL;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAkBiB,gBAAgB,QAAhB,EAA0B,iBAAiB,MAA3C,CAlBjB;;AAAA;AAkBN,0BAlBM;;AAAA,kBAoBN,eAAe,EAAf,KAAsB,KApBhB;AAAA;AAAA;AAAA;;AAAA,6CAoB8B,cAAc,eAAe,KAA7B,CApB9B;;AAAA;AAoBkE;AAC5E,oBAAQ,GAAR,CAAY,eAAe,MAA3B;;AArBU;AAAA;AAAA,mBAuBa,OAAO,GAAP,CAvBb;;AAAA;AAuBR,wBAvBQ;AAuByB;AACrC;AACA,gBAAI,aAAa,EAAjB,EAAqB;AACjB,kBAAI,MAAJ,CAAW,IAAX,EAAiB;AAAA,uBAAM,QAAQ,GAAR,CAAY,iBAAZ,EAAkC,IAAlC,SAA0C,IAA1C,CAAN;AAAA,eAAjB,EADiB,CACwD;AAC5E,aAFD,MAEO;AACL,4BAAc,aAAa,KAA3B,EADK,CAC6B;AACnC;AA7BW;AAAA;;AAAA;AA+BZ;AACA,0BAAc,iBAAiB,KAA/B,EAhCY,CAgC0B;;AAhC1B;AAAA;AAAA;;AAAA;AAmCd,0BAAc,kBAAkB,KAAhC,EAnCc,CAmCyB;;AAnCzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAZ;;AAAA;AAAA;AAAA;AAAA,GAAN;;AAuCA,IAAM,gBAAgB,SAAhB,aAAgB,CAAC,KAAD,EAAW;AAC/B,UAAQ,GAAR,CAAY,8BAAZ,EAA4C,KAA5C;AACD,CAFD;;AAIA,kBACG,IADH,CACQ,SADR,EAEG,KAFH,CAES,aAFT","file":"app.js","sourcesContent":["const express = require('express');\nconst path = require('path');\nconst { exec } = require('child_process');\nconst { PORT, HOST, FIXTURES } = process.env.NODE_ENV === \"production\" ? require('config/env/production.js') : require('config/env/development.js');\nconst setDependencies = require('config/globals.js');\nconst { installFixtures } = require('utils/index.js');\n\n/**\n * @function bootstrap\n * @return {type} {bootstrap the connection and routes}\n */\nconst bootstrap = async () => {\n  require('config/logger.js');\n  const routes = require('config/routes.js');\n  const connection = require('config/connection.js');\n  const middlewares = require('config/middlewares/index.js');\n  const fixtures = require('config/fixtures.js');\n  const compression = require('compression');\n  let app = express();\n  let middlewaresResult = await middlewares(app);\n  if(middlewaresResult.ok) {\n    app.use(express.static('./client/public'));\n    app.engine('html', require('ejs').renderFile);\n    app.set('view engine', 'html');\n    app.set('views', path.resolve(__dirname, '../views'));\n    let connectionResult = {ok: true}//await connection();//start db connection\n    if (connectionResult.ok) {\n      //debugger;\n      if (/*FIXTURES*/ false) {\n        let fixturesResult = await installFixtures(fixtures, connectionResult.result);\n        //debugger;\n        if (fixturesResult.ok === false) return errorStarting(fixturesResult.error);//log the error\n        console.log(fixturesResult.result);\n      }\n      let routesLoades = await routes(app);//define routes\n      //debugger;\n      if (routesLoades.ok) {\n          app.listen(PORT, () => console.log(\"App listen on: \", `${HOST}:${PORT}`))//lift the server\n      } else {\n        errorStarting(routesLoades.error);//log the error\n      }\n    } else {\n      //debugger;\n      errorStarting(connectionResult.error);//log the error\n    }\n  } else {\n    errorStarting(middlewaresResult.error);//log the error\n  }\n}\n\nconst errorStarting = (error) => {\n  console.log('Unable to bootstrap the app ', error);\n}\n\nsetDependencies()\n  .then(bootstrap)\n  .catch(errorStarting)\n"]}